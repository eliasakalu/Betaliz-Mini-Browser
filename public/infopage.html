<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Search Results - Betaliz</title>
  <link rel="stylesheet" href="infocss.css" />
  <link rel="icon" href="./image.png" type="image/png">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&family=Product+Sans:wght@400;500;700&display=swap" rel="stylesheet">
</head>
<body>
  <!-- Top Bar -->
  <header class="top-bar">
    <a href="/" class="logo-container">
      <img src="./image.png" alt="Betaliz" class="logo" />
      <span class="brand-name">Betaliz</span>
    </a>
    
    <form id="searchForm" role="search" class="search-form">
      <div class="search-input-container">
        <input type="search" name="q" id="searchQuery" placeholder="Search the web or type a URL" aria-label="Search" required />
      </div>
      <input type="submit" value="Search" />
    </form>
    
    <!-- Theme Toggle -->
    <button class="theme-toggle" id="themeToggle" title="Toggle dark mode">
      <i class="fas fa-moon"></i>
    </button>
    
    <!-- AI Toggle -->
    <button class="ai-toggle" id="aiToggle" title="AI Assistant">
      <i class="fas fa-robot"></i>
    </button>
  </header>

  <!-- Main Results -->
  <main class="results-container">
    <div class="search-query" id="displayQuery"></div>
    <div class="results-stats" id="resultsStats"></div>
    
    <div id="results">
        <div id="loading">Searching the web...</div>
    </div>

    <!-- Pagination -->
    <div class="pagination" id="pagination" style="display: none;">
      <button class="pagination-button" id="prevPage" disabled>
        <i class="fas fa-chevron-left"></i> Previous
      </button>
      <div class="page-numbers" id="pageNumbers"></div>
      <button class="pagination-button" id="nextPage">
        Next <i class="fas fa-chevron-right"></i>
      </button>
    </div>

    <!-- No Results State -->
    <div id="noResults" class="no-results" style="display: none;">
        <h3>No results found</h3>
        <p>Try different keywords or check your spelling.</p>
        <div class="suggestions" style="margin-top: 16px;">
          <p style="font-size: 14px;">Suggestions:</p>
          <ul style="text-align: left; display: inline-block; font-size: 14px; color: var(--text-secondary);">
            <li>Try more general keywords</li>
            <li>Check your spelling</li>
            <li>Try different words that mean the same thing</li>
          </ul>
        </div>
    </div>
  </main>

  <!-- AI Assistant Panel -->
  <div id="aiPanel" class="ai-panel">
    <div class="ai-header">
      <h3><i class="fas fa-robot"></i> AI Assistant</h3>
      <button class="close-ai" id="closeAiPanel">
        <i class="fas fa-times"></i>
      </button>
    </div>
    <div class="ai-content">
      <div class="ai-welcome">
        <p>Hello! I'm your AI assistant. I can help you understand and explore your search results.</p>
        <div class="ai-suggestions">
          <button class="suggestion-btn" data-question="Summarize the main points from these results">
            <i class="fas fa-file-alt"></i> Summarize results
          </button>
          <button class="suggestion-btn" data-question="Find related topics to this search">
            <i class="fas fa-network-wired"></i> Related topics
          </button>
          <button class="suggestion-btn" data-question="Explain this in simple terms">
            <i class="fas fa-graduation-cap"></i> Simple explanation
          </button>
        </div>
      </div>
      <div class="ai-chat" id="aiChat"></div>
      <div class="ai-input-container">
        <input type="text" id="aiInput" placeholder="Ask about your search..." />
        <button id="sendAiMessage">
          <i class="fas fa-paper-plane"></i>
        </button>
      </div>
    </div>
  </div>

  <footer>
    <div class="footer-content">
      <div class="footer-links">
        <div class="footer-left">
          <a href="#">About</a>
          <a href="#">Privacy</a>
          <a href="#">Terms</a>
        </div>
        <div class="footer-right">
          <a href="#">Settings</a>
          <a href="#">Help</a>
          <a href="#">Feedback</a>
        </div>
      </div>
    </div>
  </footer>

  <script>
    // AI Knowledge Base
    const AI_KNOWLEDGE = {
      topics: {
        'artificial intelligence': {
          summary: 'Artificial Intelligence (AI) refers to computer systems that can perform tasks typically requiring human intelligence, such as learning, reasoning, and problem-solving.',
          related: ['Machine Learning', 'Neural Networks', 'Deep Learning', 'Natural Language Processing', 'Computer Vision'],
          explanation: 'AI is like teaching computers to think and learn like humans. It helps machines recognize patterns, understand language, and make decisions.'
        },
        'web development': {
          summary: 'Web development involves creating and maintaining websites, including front-end (what users see) and back-end (server-side functionality) development.',
          related: ['HTML/CSS', 'JavaScript', 'React', 'Node.js', 'Databases', 'APIs'],
          explanation: 'Web development is like building digital houses - you create the structure, design the interior, and make everything work together smoothly.'
        },
        'machine learning': {
          summary: 'Machine Learning is a subset of AI that enables computers to learn from data without being explicitly programmed, using algorithms to find patterns.',
          related: ['Supervised Learning', 'Unsupervised Learning', 'Neural Networks', 'Data Science', 'Predictive Analytics'],
          explanation: 'Machine Learning is like teaching computers to learn from examples, just like how humans learn from experience.'
        },
        'data science': {
          summary: 'Data Science involves extracting insights from data using scientific methods, processes, and systems to inform decision-making.',
          related: ['Statistics', 'Data Analysis', 'Machine Learning', 'Big Data', 'Data Visualization'],
          explanation: 'Data Science is like being a detective who finds hidden patterns and stories in large amounts of information.'
        }
      },
      responses: {
        greetings: [
          "Hello! I'm here to help you explore your search results. What would you like to know?",
          "Hi there! I can help you understand more about your search. What questions do you have?",
          "Welcome! I'm ready to assist you with your search. What would you like me to explain?"
        ]
      }
    };

    let searchContext = {
      query: '',
      results: [],
      categories: []
    };

    document.addEventListener("DOMContentLoaded", () => {
      initThemeToggle();
      initAIAssistant();
      initSearch();
    });

    function initThemeToggle() {
      const themeToggle = document.getElementById('themeToggle');
      const icon = themeToggle.querySelector('i');
      
      const savedTheme = localStorage.getItem('theme') || 'light';
      document.documentElement.setAttribute('data-theme', savedTheme);
      updateThemeIcon(icon, savedTheme);
      
      themeToggle.addEventListener('click', () => {
        const currentTheme = document.documentElement.getAttribute('data-theme');
        const newTheme = currentTheme === 'light' ? 'dark' : 'light';
        
        document.documentElement.setAttribute('data-theme', newTheme);
        localStorage.setItem('theme', newTheme);
        updateThemeIcon(icon, newTheme);
      });
      
      function updateThemeIcon(icon, theme) {
        icon.className = theme === 'light' ? 'fas fa-moon' : 'fas fa-sun';
      }
    }

    function initAIAssistant() {
      const aiToggle = document.getElementById('aiToggle');
      const aiPanel = document.getElementById('aiPanel');
      const closeAiPanel = document.getElementById('closeAiPanel');
      const sendButton = document.getElementById('sendAiMessage');
      const aiInput = document.getElementById('aiInput');
      const aiChat = document.getElementById('aiChat');
      const suggestionButtons = document.querySelectorAll('.suggestion-btn');

      aiToggle.addEventListener('click', () => {
        aiPanel.classList.add('active');
        if (aiChat.children.length === 0) {
          const currentQuery = localStorage.getItem("searchQuery") || "your search";
          const greeting = AI_KNOWLEDGE.responses.greetings[
            Math.floor(Math.random() * AI_KNOWLEDGE.responses.greetings.length)
          ];
          addChatMessage(greeting, 'ai');
        }
      });

      closeAiPanel.addEventListener('click', () => {
        aiPanel.classList.remove('active');
      });

      async function sendAIMessage() {
        const message = aiInput.value.trim();
        if (!message) return;

        addChatMessage(message, 'user');
        aiInput.value = '';

        const thinkingIndicator = addThinkingIndicator();
        
        setTimeout(() => {
          removeThinkingIndicator(thinkingIndicator);
          const response = generateAIResponse(message);
          addChatMessage(response, 'ai');
        }, 1000 + Math.random() * 1000);
      }

      function addThinkingIndicator() {
        const thinkingDiv = document.createElement('div');
        thinkingDiv.className = 'chat-message ai-message thinking-indicator';
        thinkingDiv.innerHTML = `
          <div class="message-content">
            <div class="message-text">
              <i class="fas fa-ellipsis-h"></i> Thinking...
            </div>
          </div>
        `;
        aiChat.appendChild(thinkingDiv);
        aiChat.scrollTop = aiChat.scrollHeight;
        return thinkingDiv;
      }

      function removeThinkingIndicator(indicator) {
        indicator.remove();
      }

      function generateAIResponse(userMessage) {
        const { query, results } = searchContext;
        const lowerMessage = userMessage.toLowerCase();
        
        const knownTopic = Object.keys(AI_KNOWLEDGE.topics).find(topic => 
          query.toLowerCase().includes(topic)
        );

        if (lowerMessage.includes('summarize') || lowerMessage.includes('summary')) {
          if (knownTopic && AI_KNOWLEDGE.topics[knownTopic]) {
            return `Based on your search for "${query}": ${AI_KNOWLEDGE.topics[knownTopic].summary}`;
          }
          return `Based on your search for "${query}", I found ${results.length} results covering various aspects of this topic. The information appears comprehensive with multiple perspectives.`;
        } else if (lowerMessage.includes('related') || lowerMessage.includes('similar')) {
          if (knownTopic && AI_KNOWLEDGE.topics[knownTopic]) {
            return `For "${query}", you might also explore: ${AI_KNOWLEDGE.topics[knownTopic].related.join(', ')}`;
          }
          return `For "${query}", related topics might include: advanced concepts, practical applications, latest trends, and beginner guides.`;
        } else if (lowerMessage.includes('explain') || lowerMessage.includes('simple')) {
          if (knownTopic && AI_KNOWLEDGE.topics[knownTopic]) {
            return `In simple terms: ${AI_KNOWLEDGE.topics[knownTopic].explanation}`;
          }
          return `"${query}" involves fundamental concepts and practical applications that can be understood through the available learning resources.`;
        } else {
          return `Regarding your search for "${query}", I can help you explore various aspects of this topic. The search results provide comprehensive coverage.`;
        }
      }

      sendButton.addEventListener('click', sendAIMessage);
      aiInput.addEventListener('keypress', (e) => {
        if (e.key === 'Enter') sendAIMessage();
      });

      suggestionButtons.forEach(btn => {
        btn.addEventListener('click', function() {
          aiInput.value = this.getAttribute('data-question');
          sendAIMessage();
        });
      });
    }

    function addChatMessage(text, sender) {
      const chat = document.getElementById('aiChat');
      const messageDiv = document.createElement('div');
      messageDiv.className = `chat-message ${sender}-message`;
      
      const time = new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});
      
      messageDiv.innerHTML = `
        <div class="message-content">
          <div class="message-text">${text}</div>
          <div class="message-time">${time}</div>
        </div>
      `;
      
      chat.appendChild(messageDiv);
      chat.scrollTop = chat.scrollHeight;
    }

    function initSearch() {
      const query = localStorage.getItem("searchQuery");
      if (!query) {
        window.location.href = "/";
        return;
      }

      document.getElementById("displayQuery").textContent = `"${query}"`;
      document.getElementById("searchQuery").value = query;
      searchContext.query = query;

      performSearch(query);
      
      document.getElementById("searchForm").addEventListener("submit", function(e) {
        e.preventDefault();
        const newQuery = document.getElementById("searchQuery").value.trim();
        if (newQuery) {
          localStorage.setItem("searchQuery", newQuery);
          document.getElementById("loading").style.display = "block";
          document.getElementById("results").innerHTML = '<div id="loading">Searching the web...</div>';
          document.getElementById("pagination").style.display = "none";
          document.getElementById("noResults").style.display = "none";
          document.getElementById("displayQuery").textContent = `"${newQuery}"`;
          searchContext.query = newQuery;
          performSearch(newQuery);
        }
      });
    }

    function performSearch(query) {
      document.getElementById("loading").style.display = "block";
      
      setTimeout(() => {
        const searchResults = generateSearchResults(query);
        displaySearchResults(searchResults, searchResults.length);
        searchContext.results = searchResults;
        searchContext.categories = [...new Set(searchResults.map(r => r.category))];
      }, 800);
    }

    function displaySearchResults(results, totalCount) {
      document.getElementById("loading").style.display = "none";
      
      if (results.length === 0) {
        document.getElementById("noResults").style.display = "block";
        document.getElementById("resultsStats").textContent = "No results found";
        return;
      }

      const searchTime = (Math.random() * 0.5 + 0.1).toFixed(2);
      document.getElementById("resultsStats").textContent = `About ${totalCount.toLocaleString()} results (${searchTime} seconds)`;
      displayResultsWithPagination(results);
    }

    function generateSearchResults(query) {
      const results = [];
      const templates = [
        {
          title: `${query} - Wikipedia`,
          url: `https://en.wikipedia.org/wiki/${query.replace(/\s+/g, '_')}`,
          displayUrl: "en.wikipedia.org › wiki",
          snippet: `Learn about ${query} - comprehensive coverage including history, key concepts, applications, and related topics. Perfect for beginners and experts alike.`,
          category: "Encyclopedia"
        },
        {
          title: `Complete Guide to ${query}`,
          url: `https://www.guides.com/${query.replace(/\s+/g, '-').toLowerCase()}`,
          displayUrl: "www.guides.com › learn",
          snippet: `Step-by-step guide to understanding ${query}. Covers fundamentals, best practices, and advanced techniques with practical examples and real-world applications.`,
          category: "Guide"
        },
        {
          title: `Latest ${query} News & Updates`,
          url: `https://www.technews.com/${query.replace(/\s+/g, '-').toLowerCase()}`,
          displayUrl: "www.technews.com › latest",
          snippet: `Stay updated with the latest developments in ${query}. Breaking news, industry trends, expert analysis, and future predictions from trusted sources.`,
          category: "News"
        },
        {
          title: `${query} Tutorial for Beginners`,
          url: `https://www.learnfast.com/${query.replace(/\s+/g, '-').toLowerCase()}`,
          displayUrl: "www.learnfast.com › tutorials",
          snippet: `Easy-to-follow tutorial series for learning ${query}. Includes hands-on exercises, code examples, and practical projects to build your skills.`,
          category: "Tutorial"
        }
      ];

      for (let i = 0; i < 8; i++) {
        const base = templates[i % templates.length];
        results.push({
          ...base,
          favicon: `https://www.google.com/s2/favicons?domain=${new URL(base.url).hostname}&sz=32`,
          date: getRandomDate(),
          size: getRandomSize()
        });
      }

      return results;
    }

    let currentPage = 1;
    let resultsPerPage = 8;
    let allResults = [];

    function displayResultsWithPagination(results) {
      allResults = results;
      if (allResults.length > resultsPerPage) {
        document.getElementById("pagination").style.display = "flex";
        setupPagination();
      }
      displayPage(currentPage);
    }

    function displayPage(page) {
      const resultsContainer = document.getElementById("results");
      const startIndex = (page - 1) * resultsPerPage;
      const pageResults = allResults.slice(startIndex, startIndex + resultsPerPage);

      let resultsHTML = '';
      pageResults.forEach((item, index) => {
        const isFeatured = index === 0 && page === 1;
        resultsHTML += `
          <div class="result-item ${isFeatured ? 'featured-result' : ''}">
            <div class="result-content">
              <div class="result-url-container">
                <img src="${item.favicon}" alt="Favicon" class="favicon" onerror="this.style.display='none'">
                <div class="result-url">${item.displayUrl}</div>
              </div>
              <h3 class="result-title">
                <a href="${item.url}" target="_blank">${item.title}</a>
              </h3>
              <p class="result-snippet">${item.snippet}</p>
              <div class="result-meta">
                <span class="result-category">${item.category}</span>
                <span class="result-date">${item.date}</span>
                <span class="result-size">${item.size}</span>
              </div>
            </div>
          </div>
        `;
      });

      resultsContainer.innerHTML = resultsHTML;
      updatePaginationButtons();
    }

    function setupPagination() {
      const totalPages = Math.ceil(allResults.length / resultsPerPage);
      const pageNumbersContainer = document.getElementById("pageNumbers");
      pageNumbersContainer.innerHTML = '';

      for (let i = 1; i <= Math.min(7, totalPages); i++) {
        const pageElement = document.createElement('button');
        pageElement.className = `page-number ${i === currentPage ? 'active' : ''}`;
        pageElement.textContent = i;
        pageElement.addEventListener('click', () => {
          currentPage = i;
          displayPage(currentPage);
          setupPagination();
        });
        pageNumbersContainer.appendChild(pageElement);
      }

      document.getElementById('prevPage').addEventListener('click', () => {
        if (currentPage > 1) {
          currentPage--;
          displayPage(currentPage);
          setupPagination();
        }
      });

      document.getElementById('nextPage').addEventListener('click', () => {
        if (currentPage < totalPages) {
          currentPage++;
          displayPage(currentPage);
          setupPagination();
        }
      });
    }

    function updatePaginationButtons() {
      const totalPages = Math.ceil(allResults.length / resultsPerPage);
      document.getElementById('prevPage').disabled = currentPage === 1;
      document.getElementById('nextPage').disabled = currentPage === totalPages;
    }

    function getRandomDate() {
      const dates = ['1 day ago', '3 days ago', '1 week ago', '2 weeks ago', '1 month ago'];
      return dates[Math.floor(Math.random() * dates.length)];
    }

    function getRandomSize() {
      const sizes = ['15KB', '28KB', '42KB', '56KB', '71KB'];
      return sizes[Math.floor(Math.random() * sizes.length)];
    }
  </script>
</body>
</html>